<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Blackjack ‚Äî —Å–æ —Å—Ç–∞–≤–∫–∞–º–∏ –∏ –±–∞–ª–∞–Ω—Å–æ–º</title>
  <style>
    :root{--bg:#0b1220;--accent:#7c5cff}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial}
    body{margin:0;min-height:100vh;background:linear-gradient(160deg,#061021 0%,#0f1724 60%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:28px}
    .wrap{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));border-radius:16px;padding:22px;box-shadow:0 10px 40px rgba(2,6,23,0.7);backdrop-filter:blur(6px);position:relative}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;flex-wrap:wrap}
    h1{font-size:20px;margin:0}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{background:linear-gradient(180deg,var(--accent),#5b3ee6);border:0;padding:10px 14px;border-radius:10px;color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(124,92,255,0.18);transition:all .2s}
    button:hover{filter:brightness(1.1)}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent);font-weight:700}
    main{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .table{background:linear-gradient(180deg,rgba(255,255,255,0.015),transparent);padding:18px;border-radius:12px;min-height:320px;position:relative;overflow:hidden}
    .hand{min-height:120px;display:flex;align-items:flex-end;gap:12px;flex-wrap:wrap}
    .card{width:72px;height:96px;border-radius:8px;background:#fff;background-size:cover;background-position:center;box-shadow:0 8px 22px rgba(2,6,23,0.6);opacity:0;transform:translateY(30px) scale(0.9);animation:deal 0.4s forwards}
    @keyframes deal{to{opacity:1;transform:translateY(0) scale(1);}}
    .info{display:flex;flex-direction:column;gap:10px}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:10px}
    .score{font-size:18px;font-weight:700}
    .small{font-size:13px;color:#cbd7f7}
    .actions{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
    .log{margin-top:12px;max-height:130px;overflow:auto;padding-right:6px}
    .log p{margin:6px 0;font-size:13px;color:#cbd7f7}
    footer{margin-top:14px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
    #messageOverlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(10,15,30,0.85);color:white;display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:800;opacity:0;pointer-events:none;transition:opacity .4s}
    #messageOverlay.show{opacity:1;pointer-events:auto}
    #betScreen{position:absolute;z-index:9;top:0;left:0;right:0;bottom:0;background:rgba(10,15,30,0.9);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;font-size:18px;font-weight:600;}
    #betScreen input{font-size:18px;padding:8px 10px;border-radius:8px;border:none;text-align:center;width:100px;}

    /* üì± –∞–¥–∞–ø—Ç–∏–≤ */
    @media (max-width: 768px) {
      body{padding:12px;}
      main{grid-template-columns:1fr;gap:12px;}
      .wrap{padding:14px;}
      h1{font-size:16px;text-align:center;margin-bottom:8px;}
      .controls{justify-content:center;}
      .table{padding:12px;min-height:auto;}
      .hand{justify-content:center;min-height:100px;}
      .card{width:56px;height:74px;border-radius:6px;}
      .info{flex-direction:row;flex-wrap:wrap;justify-content:center;gap:12px;}
      .panel{flex:1 1 160px;font-size:14px;}
      .score{font-size:16px;}
      #messageOverlay{font-size:22px;}
      #betScreen{font-size:16px;padding:10px;}
      #betScreen input{font-size:16px;width:80px;}
      footer{flex-direction:column;gap:6px;font-size:12px;text-align:center;}
    }
    @media (max-width: 420px) {
      .card{width:48px;height:64px;}
      button{padding:8px 12px;font-size:13px;}
      .score{font-size:14px;}
      .small{font-size:12px;}
      #messageOverlay{font-size:20px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üé¥ Mini Blackjack</h1>
      <div class="controls">
        <button id="addMoney">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å (+100)</button>
        <div class="small">–ë–∞–ª–∞–Ω—Å: <span id="balance">500</span>‚ÇΩ</div>
      </div>
    </header>
    <main>
      <div class="table">
        <div class="info">
          <div class="panel"><div>–î–∏–ª–µ—Ä:</div><div class="score" id="dealerScore">0</div></div>
          <div class="panel"><div>–ò–≥—Ä–æ–∫:</div><div class="score" id="playerScore">0</div></div>
        </div>
        <div class="hand" id="dealerHand"></div>
        <div class="hand" id="playerHand"></div>
        <div id="messageOverlay"></div>
        <div id="betScreen">
          <div>–°–¥–µ–ª–∞–π —Å—Ç–∞–≤–∫—É:</div>
          <input id="betInput" type="number" value="50" min="10" step="10">
          <button id="startGame">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
      </div>
      <div class="info">
        <div class="panel">
          <div>–î–µ–π—Å—Ç–≤–∏—è</div>
          <div class="actions">
            <button id="hit" disabled>–í–∑—è—Ç—å –∫–∞—Ä—Ç—É</button>
            <button id="stand" disabled>–•–≤–∞—Ç–∏—Ç</button>
          </div>
        </div>
        <div class="panel">
          <div>–°—Ç–∞–≤–∫–∞: <span id="bet">0</span>‚ÇΩ</div>
        </div>
        <div class="panel log" id="log"></div>
      </div>
    </main>
    <footer><div>–†–∞–∑–¥–∞–≤–∞–π –∏ –ø–æ–±–µ–∂–¥–∞–π üí∞</div><div class="small">by GPT-5</div></footer>
  </div>

  <script>
    const dealerHand=document.getElementById("dealerHand"),
          playerHand=document.getElementById("playerHand"),
          dealerScore=document.getElementById("dealerScore"),
          playerScore=document.getElementById("playerScore"),
          message=document.getElementById("messageOverlay"),
          hitBtn=document.getElementById("hit"),
          standBtn=document.getElementById("stand"),
          log=document.getElementById("log"),
          balanceEl=document.getElementById("balance"),
          betEl=document.getElementById("bet"),
          addMoney=document.getElementById("addMoney"),
          betScreen=document.getElementById("betScreen"),
          betInput=document.getElementById("betInput"),
          startGameBtn=document.getElementById("startGame");

    let deck=[],player=[],dealer=[],balance=500,bet=0,inGame=false;

    function newDeck(){
      const suits=['S','H','D','C'],cards=[];
      for(let s of suits)
        for(let v=1;v<=13;v++) cards.push({s,v});
      return cards.sort(()=>Math.random()-0.5);
    }

    function cardValue(v){
      if(v>10) return 10;
      if(v===1) return 11;
      return v;
    }

    function score(hand){
      let sum=0,aces=0;
      for(let c of hand){sum+=cardValue(c.v);if(c.v===1)aces++;}
      while(sum>21 && aces>0){sum-=10;aces--;}
      return sum;
    }

    function cardImg(c){return `https://deckofcardsapi.com/static/img/${cardCode(c)}.png`;}
    function cardCode(c){
      const map={1:'A',11:'J',12:'Q',13:'K'};
      const v=map[c.v]||c.v;
      return v+c.s;
    }

    function renderHand(el,hand){
      el.innerHTML='';
      hand.forEach((c,i)=>{
        const img=document.createElement('div');
        img.className='card';
        img.style.animationDelay=`${i*0.2}s`;
        img.style.backgroundImage=`url(${cardImg(c)})`;
        el.appendChild(img);
      });
    }

    function updateScores(){
      playerScore.textContent=score(player);
      dealerScore.textContent=score(dealer);
    }

    function logMsg(t){const p=document.createElement('p');p.textContent=t;log.prepend(p);}

    function endRound(result){
      inGame=false;
      hitBtn.disabled=true;standBtn.disabled=true;
      if(result==='win'){balance+=bet*2;showMsg('–¢—ã –≤—ã–∏–≥—Ä–∞–ª! üí∞');logMsg(`–í—ã–∏–≥—Ä—ã—à +${bet*2}‚ÇΩ`);}
      else if(result==='draw'){balance+=bet;showMsg('–ù–∏—á—å—è ü§ù');logMsg('–ù–∏—á—å—è');}
      else{showMsg('–ü—Ä–æ–∏–≥—Ä—ã—à üò¢');logMsg(`–ü—Ä–æ–∏–≥—Ä—ã—à -${bet}‚ÇΩ`);}
      balanceEl.textContent=balance;
      setTimeout(()=>{betScreen.style.display='flex';},2000);
    }

    function showMsg(t){message.textContent=t;message.classList.add('show');setTimeout(()=>message.classList.remove('show'),1500);}

    function startRound(){
      if(balance<=0){showMsg('–ë–∞–ª–∞–Ω—Å –ø—É—Å—Ç');return;}
      bet=parseInt(betInput.value)||0;
      if(bet<=0||bet>balance){showMsg('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞');return;}
      balance-=bet;
      balanceEl.textContent=balance;
      betEl.textContent=bet;
      deck=newDeck();player=[];dealer=[];
      dealer.push(deck.pop(),deck.pop());
      player.push(deck.pop(),deck.pop());
      renderHand(dealerHand,dealer);
      renderHand(playerHand,player);
      updateScores();
      inGame=true;
      hitBtn.disabled=false;standBtn.disabled=false;
      betScreen.style.display='none';
    }

    function dealerPlay(){
      while(score(dealer)<17) dealer.push(deck.pop());
      renderHand(dealerHand,dealer);
    }

    hitBtn.onclick=()=>{
      if(!inGame)return;
      player.push(deck.pop());
      renderHand(playerHand,player);
      updateScores();
      if(score(player)>21) endRound('lose');
    };

    standBtn.onclick=()=>{
      if(!inGame)return;
      dealerPlay();
      updateScores();
      const ps=score(player),ds=score(dealer);
      if(ds>21||ps>ds) endRound('win');
      else if(ps===ds) endRound('draw');
      else endRound('lose');
    };

    addMoney.onclick=()=>{balance+=100;balanceEl.textContent=balance;};
    startGameBtn.onclick=startRound;

    // –∞–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ —Å—Ç–∞–≤–∫—É
    betInput.focus();
  </script>
</body>
</html>
